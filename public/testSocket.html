<html>
<head></head>
<body>
<script>
        var socket;
        function createWebSocket(host) {
                if(window.MozWebSocket) {
                        window.WebSocket=window.MozWebSocket;
                }
                if(!window.WebSocket) {
                        alert('Votre navigateur ne supporte pas les webSocket!');
                        return false;
                } else {
                        socket = new WebSocket(host);
                        socket.onopen = function() { console.log('socket ouverte'); }
                        socket.onclose = function() { console.log('socket ferm√©e'); }
                        socket.onerror = function() { console.log('Une erreur est survenue'); }
                        socket.onmessage = function(msg){
                                try { //tente de parser data
                                        data = JSON.parse(msg.data);
                                } catch(exception) {
                                        data = msg.data
                                }      
                                //ici on poura effectuer tout ce que l'on veux sur notre objet data
                                console.log(data);
                        }
                }
        }
        function sendMessage(message) {
                var data = message;
                if(typeof data == 'object') { // si data est un objet on le change en chaine
                        data = JSON.stringify(data);
                }
                socket.send(data);
        }
        createWebSocket("ws://127.0.0.1:9000/api/stream/webSocket");
</script>
</body>
</html>