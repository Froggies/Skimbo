<section id="content">
	<section class="notifications" 
					 ng-controller="NotificationController"
					 ng-include src="'assets/app/views/notification.html'">
	</section>

	<section class="column" 
			ng-repeat="c in columns"
		  	id="column_{{$index}}"
			draggable="true"
			ondragstart="dragStart(this,event)"
			ondragend="dragEnd(this,event)"
			ondragenter="dragEnter(this,event)"
			ondragleave="dragLeave(this,event)"
			ondragover="dragOver(this,event)"
			ondrop="drop(this,event)"
			style="width:{{c.csswidth}};height:{{c.cssheight}}">
		<header class="column-title">
			<div class="title" ng-hide="c.showModifyColumn">{{c.title}}</div>
			<input class="title-input error {{c.showErrorTitleAlreadyExist}} {{c.showErrorTitleRequired}}" type="text" ng-model="c.title" ng-show="c.showModifyColumn" value="{{c.title}}" onfocus="if (this.value.indexOf('What is here ?') != -1) this.value='';" />
			<div class="configure">
				<a href="#" ng-click="c.show_size_column=!c.show_size_column">⤭</a>
				<div class="column-size" ng-show="c.show_size_column">
					<div ng-repeat="h in c.compoSize">
						<a href="#" style="{{w.selectedStyle}}"
								ng-click="resizeColumn(c, h.height, w.width)" 
								ng-repeat="w in h.tab">□</a>
					</div>
					<br />
				</div>
				<a href="#" ng-click="modifyColumn(c)">⚙</a>
			</div>
		</header>
		<div class="column-content" ng-hide="c.showModifyColumn">
			<ul>
				<li class="element" ng-repeat="m in c.messages | filter:$parent.$parent.query">
					<div class="timeline">
						<div class="from-social-network vertical-text {{m.from}}">{{m.from}}</div>
						<div class="rond {{m.from}}"></div>
					</div>
					<div class="message-content">
						<img ng-src="{{m.authorAvatar}}" title="{{m.authorScreenName}}" width="32" height="32">
						<a href="{{m.directLink}}" class="author-name {{m.from}}" target="_blank">{{m.authorName}}</a>
						<p class="date-creation">{{m.dateAgo}}</p>
						<div class="message" ng-bind-html="m.message" title="{{m.original}}">
						</div>
					</div>
				</li>
			</ul>
		</div>
		<div class="modify-column" ng-show="c.showModifyColumn">
			<div class="error-div">
				<span class="error-message" ng-show="c.showErrorTitleRequired">{{'TITLE_REQUIRED' | i18n}}</span> 
				<br ng-show="c.showErrorTitleRequired"/>
				<span class="error-message" ng-show="c.showErrorTitleAlreadyExist">{{'TITLE_ALREADY_EXISTS' | i18n}}</span> 
				<br ng-show="c.showErrorTitleAlreadyExist"/>
			</div>
			<div class="add-service">{{'AVAILABLE_SERVICES' | i18n}}</div>
			<ul class="services-proposes">
				<li ng-repeat="service in serviceProposes">
					<div class="social-network-link">
						<a href="#" ng-click="addService(service, c)" ref="{{service.explainService}}">
							<img class="social-network-active {{service.hasParser}}" ng-src="assets/img/brand/{{service.socialNetwork}}.png" alt="{{service.socialNetwork}}" width="32" height="32"></a>
						<span class="social-network-char {{service.socialNetwork}} social-network-active {{service.hasParser}}">{{service.typeServiceChar}}</span>
					</div>
				</li>
			</ul>
			<div class="add-service" ng-show="c.unifiedRequests.length > 0">{{'ALREADY_IN_YOUR_COLUMN' | i18n}}</div>
			<div class="error-div">
				<span class="error-message" ng-show="c.showErrorBlankArg">{{'ALL_FIELD_REQUIRED' | i18n}}</span> 
				<span class="error-message" ng-show="c.showDoubleParser">{{'CANT_ADD_SAME_SERVICE' | i18n}}</span> 
				<br ng-show="c.showErrorBlankArg || c.showDoubleParser"/>
			</div>
			<ul class="services-actives">
				<li class="service-empty" ng-show="c.unifiedRequests.length == 0">{{'TO_ADD_STREAM_IN_COLUMN' | i18n}}</li>
				<li ng-repeat="service in c.unifiedRequests">
					<div class="input-service" ng-show="service.hasArguments" ng-repeat="arg in service.args ">
						<img class="img-service" ng-src="assets/img/brand/{{service.providerName}}.png" alt="{{service.providerName}}" width="24" height="24">
						<span class="type-service {{service.providerName}}">
							{{typeServiceCharByService(service.service)}}
						</span>
						<input class="arg-service" type="text" ng-model="arg.value" placeholder="{{arg.key}}" pattern="[ a-zA-Z0-9]*"/>
						<a href="#" 
							class="delete-service {{service.providerName}}"
							ng-click="deleteService(service,c,arg)"
						>✘</a>
					</div>
					<div class="input-service" ng-show="!service.hasArguments">
						<img class="img-service" ng-src="assets/img/brand/{{service.providerName}}.png" alt="{{service.providerName}}" width="24" height="24">
						<span class="receving-service">
							{{'YOU_ARE_RECEIVING' | i18n}} {{service.serviceName}}
						</span>
						<a href="#" 
							class="delete-service {{service.providerName}}"
							ng-click="deleteService(service,c)"
						>✘</a>
					</div>
				</li>
			</ul>


			<div class="controls-modify" ng-hide="c.newColumn" >
				<input type="button" ng-click="changeColumn(c);" value="{{'CHANGE' | i18n}}"/>
				<br/>
				<br/>
				<a href="#" class="delete-link" ng-click="deleteColumn(c)">{{'DELETE' | i18n}}</a>
			</div>
			<div ng-show="c.newColumn" class="controls-new"> 
				<input type="button" ng-click="changeColumn(c);" value="{{'CREATE' | i18n}}"/>
				<br/>
				<br/>
				<a href="#" class="delete-link" ng-click="deleteColumn(c)">{{'CANCEL' | i18n}}</a>
			</div>
		</div>
	</section>
	<section class="column-new">
		<a href="#" ng-click="addColumn()">{{'ADD_NEW_COLUMN' | i18n}}</a>
	</section>
</section>
