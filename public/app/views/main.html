<section id="content" ng-controller="ColumnsCtrl" >
	
	<section class="column" 			  
			 ng-repeat="c in columns">
		<header class="column-title">
			<div class="title" ng-hide="c.showModifyColumn">{{c.title}}</div>
			<input class="error {{c.showErrorTitleAlreadyExist}} {{c.showErrorTitleRequired}}" type="text" ng-model="c.title" ng-show="c.showModifyColumn" value="{{c.title}}"/>
			<div class="configure"><a href="#" ng-click="modifyColumn(c)">⚙</a></div>
		</header>
		<div class="column-content" ng-hide="c.showModifyColumn">
			<ul>
				<li class="element" ng-repeat="m in c.messages | filter:$parent.query">
					<div class="timeline">
						<div class="from-social-network vertical-text {{m.from}}">{{m.from}}</div>
						<div class="rond {{m.from}}"></div>
					</div>
					<div class="message-content">
						<img src="{{m.authorAvatar}}" title="{{m.authorScreenName}}" width="32" height="32">
						<a href="{{m.directLink}}" class="author-name {{m.from}}" target="_blank">{{m.authorName}}</a>
						<p class="date-creation">{{m.createdAt | date:'mediumDate'}}</p>
						<div class="message" title="{{m.message}}"> {{truncateString(m.message)}}</div>
					</div>
				</li>
			</ul>
		</div>
		<div class="modify-column" ng-show="c.showModifyColumn">
			<div class="error-div">
				<span class="error-message" ng-show="c.showErrorTitleRequired">The title is required !</span> 
				<br ng-show="c.showErrorTitleRequired"/>
				<span class="error-message" ng-show="c.showErrorTitleAlreadyExist">This title already exist</span> 
				<br ng-show="c.showErrorTitleAlreadyExist"/>
			</div>
			<div class="add-service">Add...</div>
			<ul class="services-proposes">
				<li ng-repeat="service in serviceProposes">
					<div class="social-network-link">
						<a href="#" ng-click="addService(service, c)" ref="{{service.explainService}}">
							<img class="social-network-active {{service.socialNetworkToken}}" src="assets/img/brand/{{service.socialNetwork}}.png" alt="{{service.socialNetwork}}" width="32" height="32"></a>
						<span class="social-network-char {{service.socialNetwork}} social-network-active {{service.socialNetworkToken}}">{{service.typeServiceChar}}</span>
					</div>
				</li>
			</ul>
			<ul class="services-actives">
				<li ng-repeat="service in c.unifiedRequests">
					<div class="input-service" ng-show="hasArguments(service)" ng-repeat="(key, value) in service.args ">
						<img class="img-service" src="assets/img/brand/{{socialNetworkByServiceName(service.service)}}.png" alt="{{socialNetworkByServiceName(service.service)}}" width="32" height="32">
						<span class="type-service {{socialNetworkByServiceName(service.service)}}">
							{{typeServiceCharByService(service.service)}}
						</span>
						<input class="arg-service" type="text" ng-model="service.args[key]" value="{{service.args[key]}}"/>
						<a href="#" 
							class="delete-service {{socialNetworkByServiceName(service.service)}}"
							ng-click="deleteService(service,c)"
						>✘</a>
					</div>
					<div ng-show="!hasArguments(service)">
						<img src="assets/img/brand/{{socialNetworkByServiceName(service.service)}}.png" alt="{{socialNetworkByServiceName(service.service)}}" width="24" height="24">
						You are receving {{getTypeByService(service.service)}}
						<a href="#" 
							class="{{socialNetworkByServiceName(service.service)}}"
							ng-click="deleteService(service,c)"
						>✘</a>
					</div>
				</li>
			</ul>


			<div class="controls-modify"ng-hide="c.newColumn" >
				<input type="button" ng-click="changeColumn(c);" value="Change"/>
				<br/>
				<br/>
				<a href="#" class="delete-link" ng-click="deleteColumn(c)">Delete</a>
			</div>
			<div ng-show="c.newColumn" class="controls-new"> 
				<input type="button" ng-click="changeColumn(c);" value="Create !"/>
			</div>
		</div>
	</section>
	<section class="column-new">
		<a href="#" ng-click="addColumn()">New</a>
	</section>
</section>
