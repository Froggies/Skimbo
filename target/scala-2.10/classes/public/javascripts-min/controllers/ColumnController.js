define(["app"],function(e){return e.controller("ColumnController",["$scope","Network","$rootScope","UnifiedRequestUtils","Visibility","PopupProvider","ArrayUtils","ColumnSize",function(e,t,n,r,i,s,o,u){function a(t){if(e.columns!==undefined)for(var r=0;r<e.columns.length;r++)if(e.columns[r].title==t)return e.columns[r];return n.tempColumns==undefined&&(n.tempColumns=[]),n.tempColumns[t]==undefined&&(n.tempColumns[t]={}),n.tempColumns[t]}e.$destroy=function(){var e=this.$parent;this.$broadcast("$destroy"),e.$$childHead==this&&(e.$$childHead=this.$$nextSibling),e.$$childTail==this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$id=null,this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this["this"]=this.$root=null,this.$$asyncQueue=null,this.$$listeners=null},e.columns=[],e.userNoColumn=!1,n.$on("availableServices",function(t,n){e.$$phase?e.serviceProposes=n:e.$apply(function(){e.serviceProposes=n})}),n.$on("allColumns",function(t,n){e.$apply(function(){u.setSize(n),u.buildSizeCompo(n),e.columns.length==0&&(e.columns=n),e.userNoColumn=e.columns.length===0})}),n.$on("msg",function(t,n){e.$apply(function(){var e=a(n.column);e.messages==undefined&&(e.messages=[]),o.sortMsg(e.messages,n.msg),i.notifyNewMessage()})}),n.$on("newToken",function(t,n){e.$apply(function(){if(e.serviceProposes!=undefined)for(var t=0;t<e.serviceProposes.length;t++)e.serviceProposes[t].service.service.split(".")[0]==n.providerName&&(e.serviceProposes[t].socialNetworkToken=!0)})}),n.$on("delColumn",function(t,n){var r=o.indexOf(e.columns,n,"title");r>-1&&(e.$$phase?e.columns.splice(r,1):e.$apply(function(){e.columns.splice(r,1)}))}),n.$on("addColumn",function(t,n){e.$apply(function(){u.setSize([n]),u.buildSizeCompo([n]),e.columns.push(n),e.userNoColumn=e.columns.length===0})}),n.$on("modColumn",function(t,n){e.$apply(function(){console.log(n);var e=a(n.title);e.title=n.column.title,e.unifiedRequests=n.column.unifiedRequests})}),e.modifyColumn=function(e){n.$broadcast("clientModifyColumn",e)},e.resizeColumn=function(e,n,r){t.send({cmd:"resizeColumn",body:{columnTitle:e.title,height:n,width:r}}),u.resizeColumn(e,n,r)},e.messagesNoView=function(e){var t=0;if(e!=undefined&&e.messages!=undefined)for(var n=0;n<e.messages.length;n++)e.messages[n].isView==0&&t++;return t},e.markAllAsView=function(e){n.$broadcast("scrollManagerGoTop",e);if(e!=undefined&&e.messages!=undefined)for(var t=0;t<e.messages.length;t++)e.messages[t].isView=!0},e.getDetails=function(e,n){e.styleRefresh="rotate",t.send({cmd:"detailsSkimbo",body:{serviceName:e.service,id:e.idProvider,columnTitle:n.title}})},e.dispatchMsg=function(e){n.$broadcast("dispatchMsg",e)},e.star=function(e,n){e.styleRefresh="rotate",t.send({cmd:"star",body:{serviceName:e.service,id:e.idProvider,columnTitle:n.title}})},e.blurText=!1,e.switchBlur=function(){e.$apply(function(){e.blurText=!e.blurText})}}]),e})