define(["app"],function(e){return e.controller("NotificationController",["$scope","$rootScope","ArrayUtils","PopupProvider",function(e,t,n,r){e.notifications=[],t.$on("tokenInvalid",function(t,r){e.$apply(function(){n.exist(e.notifications,r,"providerName")||e.notifications.push(r)})}),t.$on("newToken",function(t,r){e.$apply(function(){var t=n.indexOf(e.notifications,r,"providerName");t>-1&&e.notifications.splice(t,1)})}),t.$on("error",function(t,r){e.$apply(function(){var t=n.existWith(e.notifications,r,function(e,t){return e.providerName==t.providerName&&e.title==t.title});t||e.notifications.push(r)})}),t.$on("disconnect",function(t,r){e.$apply(function(){r.providerName="skimbo";var t=n.existWith(e.notifications,r,function(e,t){return e.providerName==t.providerName&&e.title==t.title});t||e.notifications.push(r)})}),e.clickOnNotification=function(t){if(t.isError==0&&t.providerName!="skimbo")r.openPopup({name:t.providerName});else if(t.isError==0&&t.providerName=="skimbo")t.forceIdentification==1?window.location.href="/logout":window.location.href="/";else{var i=n.indexOfWith(e.notifications,t,function(e,t){return e.providerName==t.providerName&&e.msg==t.msg});i>-1&&e.notifications.splice(i,1)}},e.closeNotification=function(t){var r=n.indexOfWith(e.notifications,t,function(e,t){return e.providerName==t.providerName&&e.msg==t.msg});r>-1&&e.notifications.splice(r,1)}}]),e})