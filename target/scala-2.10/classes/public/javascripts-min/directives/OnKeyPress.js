define(["app"],function(e){e.directive("onKeyPress",["ArrayUtils","$timeout",function(e,t){function i(t,r){var i=e.indexOfWith(n[t],r,function(e,t){return e.globalKey=="true"||angular.equals(e.element[0],t[0])});return i}function s(e,t){var r=i(e,t);if(r>-1)return n[e][r]}function o(t,r){var i=e.indexOfWith(n[t],r,function(e,t){return e.uniqueKey===t});i>-1&&n[t].splice(i,1)}var n={},r=0;return document.onkeypress=function(e){e=e||window.event;var t=typeof e.which=="number"?e.which:e.keyCode;if(t){var n=s(t,angular.element(e.target));if(n!==undefined){var r=n.element,i=n.ctrlKeyCheck,o=n.scope,u=n.onKeyPressExec;if(i==1&&e.ctrlKey||i!=1)o.$eval(u),e.stopPropagation(),e.preventDefault()}}},{restrict:"A",link:function(e,t,i){n[i.onKeyPress]=n[i.onKeyPress]||[];var s=r;n[i.onKeyPress].push({ctrlKeyCheck:i.ctrlKeyCheck,scope:e,onKeyPressExec:i.onKeyPressExec,element:t,globalKey:i.globalKey,uniqueKey:s}),t.bind("$destroy",function(){o(i.onKeyPress,s)}),++r}}}])})